<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8>
    <title>hree.js sky</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <script src="js/three.js"></script>
    <script src="js/TrackballControls.js"></script>
    <script src="js/OBJLoader.js"></script>
    <script src="js/HDRCubeTextureLoader.js"></script>
    <script src="js/RGBELoader.js"></script>
    <script src="js/stats.min.js"></script>
    <script>

        var statsEnabled = true;
        var container, stats;

        var renderer, scene, camera, controls;

        init();

        animate();

        function init() {
            container = document.createElement('div');
            document.body.appendChild(container);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);


            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.01, 1000);
            //camera.position.z = -125;
            camera.position.set(100, 10, 15);
            camera.lookAt(new THREE.Vector3(0, 0, 0));

            //轨迹球控件，最常用的控件，可以使用鼠标轻松的移动、平移，缩放场景。
            controls = new THREE.TrackballControls(camera, renderer.domElement);
            /* 属性参数 */
            controls.rotateSpeed = 0.8;// 旋转速度
            controls.zoomSpeed = 0.2;// 缩放速度
            controls.panSpeed = 0.1;// 平controls


            controls.staticMoving = false;// 静止移动，为 true 则没有惯性
            controls.dynamicDampingFactor = 0.2;// 阻尼系数 越小 则滑动越大

            controls.minDistance = 50; // 最小视角
            controls.maxDistance = 350;// 最大视角 Infinity 无穷大


            scene.add(new THREE.HemisphereLight(0x443333, 0x222233, 4));

            //[left,right,up,down,back,front]
            new THREE.CubeTextureLoader()
                .setPath('textures/house/')
                .load(['px.png', 'nx.png', 'py.png', 'ny.png', 'pz.png', 'nz.png'], function (textureCube) {
                    scene.background = textureCube;
                });


            var geometry = new THREE.BoxGeometry(35,35, 35);
            var material = new THREE.MeshLambertMaterial({ color: 0xFFff00 });
            var cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            // 
            if (statsEnabled) {
                stats = new Stats();
                container.appendChild(stats.dom);
            }

            /* 监听事件 */
            window.addEventListener('resize', onWindowResize, false);
        }

        /* 窗口变动触发 */
        function onWindowResize() {

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        /* 循环渲染 */
        function animate() {

            requestAnimationFrame(animate);

            controls.update();
            renderer.render(scene, camera);

            if (statsEnabled) stats.update();

        }
    </script>
</body>

</html>